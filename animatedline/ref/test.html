<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8 />
        <title>test</title>
        <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
        
        
    </head>
    <body>
    	<p><svg id='exampleFive' height='200' width='700'  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
		</svg></p>

    	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    	<script type='text/javascript'>var indexSeries = [{"x":0, "y":0}, {"x":1, "y":4.006455938}, {"x":2, "y":1.953028258}, {"x":3, "y":0}, {"x":4, "y":0}, {"x":5, "y":19.13887441}, {"x":6, "y":32.33303663}, {"x":7, "y":0.259148698}, {"x":8, "y":1.859513314}, {"x":9, "y":4.271838063}, {"x":10, "y":6.476012552}, {"x":11, "y":33.00908653}, {"x":12, "y":105.1266128}, {"x":13, "y":220}, {"x":14, "y":156.5311594}, {"x":15, "y":253.4868811}, {"x":16, "y":230}, {"x":17, "y":200}, {"x":18, "y":143.1376995}, {"x":19, "y":69.06754498}, {"x":20, "y":43.32504855}, {"x":21, "y":126.8548736}, {"x":22, "y":58.62621684}, {"x":23, "y":57.15575472}, {"x":24, "y":98.00000885}, {"x":25, "y":82.89012651}, {"x":26, "y":20}, {"x":27, "y":42.02436372}, {"x":28, "y":38.86055754}, {"x":29, "y":90}, {"x":30, "y":39.64131554}]</script>
    	
    	<script type="text/javascript">
    		x_scale = d3.scale.linear().domain([0,30]).range([0, 700]);
			y_scale = d3.scale.linear().domain([0,400]).range([190,10]);

    		var lineFunction = d3.svg.line()
			    .x(function(d) { return x_scale(d.x) })
			    .y(function(d) { return y_scale(d.y) });

			function getSmoothInterpolation() {
			    var interpolate = d3.scale.linear()
			            .domain([0,1])
			            .range([1, indexSeries.length + 1]);

			    return function(t) {
			            var flooredX = Math.floor(interpolate(t));
			            var interpolatedLine = indexSeries.slice(0, flooredX);
			            
			            if(flooredX > 0 && flooredX < indexSeries.length) {
			                var weight = interpolate(t) - flooredX;
			                var weightedLineAverage = indexSeries[flooredX].y * weight + indexSeries[flooredX-1].y * (1-weight);
			                interpolatedLine.push({"x":interpolate(t)-1, "y":weightedLineAverage});
			            }
			            
			            return lineFunction(interpolatedLine);
			        }
			    }


			d3.select('#exampleFive')
			    .append('path')
			    .attr('id', 'secondSeries')
			    .attr('fill', 'none')
			    .attr('stroke', 'black')
			    .attr('stroke-width', 2);

			d3.select('#exampleFive')
			    .append('text')
			    .attr('fill', 'black')
			    .attr('y', 20)
			    .attr('x', 600);
			    // .style('cursor', 'hand')
			    // .text('Click me')
			    // .on('click', function() {
			    //     d3.select('#exampleFive > #secondSeries')
			    //         .transition()
			    //         .duration(3000)
			    //         .attrTween('d', getSmoothInterpolation);
			    // });
			    d3.select('#exampleFive > #secondSeries')
			            .transition()
			            .duration(3000)
			            .attrTween('d', getSmoothInterpolation);
    	</script>
    </body>
</html>

